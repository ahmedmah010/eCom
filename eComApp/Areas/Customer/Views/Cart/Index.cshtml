@model List<CartItem>

@{
    ViewData["Title"] = "My Cart";
}



<section class="h-100" style="background-color: #eee;">
    <div class="container h-100 py-5">
        <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col-10">

                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h3 class="fw-normal mb-0 text-black">Shopping Cart</h3>
                    
                </div>
               @foreach(var item in Model)
                {
                    <div id="@item.Id">
                        <partial name="_CartItem" model="item"/>
                    </div>
                   
                }
   

                <div class="card mb-4">
                    <div class="card-body p-4 d-flex flex-row">
                        <input type="text" id="form1" class="form-control form-control-lg" placeholder="Discount Code"/>
                        <button type="button" class="btn btn-outline-warning  ms-3">Apply</button>
                    </div>
                </div>

                <div class="card mb-4">
                    <div class="card-body p-4 d-flex flex-row">
                        <div id="TotalPrice">
                            <partial name="_CartTotalPrice"/>
                        </div>
                    </div>
                </div>

                
                <div class="card-body d-flex justify-content-end">
                    <button type="button" class="btn btn-warning btn-block btn-lg">Proceed to Pay</button>
                </div>
               

            </div>
        </div>
    </div>
</section>


@section Scripts{

    <script type="text/javascript">

        function UpdateCartItem(Id, quantity) {
            var id = Id;
            var quan = quantity;
            var _url = '@Url.Action("CartItemPV", "Cart")';
            $.ajax(
                {
                    url: _url,
                    data: { "id": id,"quan":quan},
                    success: function (res) {
                        $(`#${id}`).html(res);
                        UpdateCartTotalPrice();
                    },
                }
            );
        }
        function UpdateCartTotalPrice() {
            var _url = '@Url.Action("CartTotalPrice", "Cart")';
            $.ajax(
                {
                    url: _url,
                    success: function (res) {
                        $('#TotalPrice').html(res);
                    },
                }
            );
        }

    </script>
}





